(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"7ljp":function(e,a,t){"use strict";t.d(a,"a",(function(){return i}));var n=t("q1tI"),c=t.n(n);function s(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function o(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function r(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?o(Object(t),!0).forEach((function(a){s(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function p(e,a){if(null==e)return{};var t,n,c=function(e,a){if(null==e)return{};var t,n,c={},s=Object.keys(e);for(n=0;n<s.length;n++)t=s[n],a.indexOf(t)>=0||(c[t]=e[t]);return c}(e,a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)t=s[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(c[t]=e[t])}return c}var m=c.a.createContext({}),b=function(e){var a=c.a.useContext(m),t=a;return e&&(t="function"===typeof e?e(a):r(r({},a),e)),t},O="mdxType",j={inlineCode:"code",wrapper:function(e){var a=e.children;return(c.a.createElement(c.a.Fragment,{},a))}},l=c.a.forwardRef((function(e,a){var t=e.components,n=e.mdxType,s=e.originalType,o=e.parentName,m=p(e,["components","mdxType","originalType","parentName"]),O=b(t),l=n,i=O["".concat(o,".").concat(l)]||O[l]||j[l]||s;return t?c.a.createElement(i,r(r({ref:a},m),{},{components:t})):c.a.createElement(i,r({ref:a},m))}));function i(e,a){var t=arguments,n=a&&a.mdxType;if("string"===typeof e||n){var s=t.length,o=new Array(s);o[0]=l;var r={};for(var p in a)hasOwnProperty.call(a,p)&&(r[p]=a[p]);r.originalType=e,r[O]="string"===typeof e?e:n,o[1]=r;for(var m=2;m<s;m++)o[m]=t[m];return c.a.createElement.apply(null,o)}return c.a.createElement.apply(null,t)}l.displayName="MDXCreateElement"},"8KKP":function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return b}));var n=t("wx14"),c=t("Ff2n"),s=t("q1tI"),o=t.n(s),r=t("7ljp"),p=(o.a.createElement,{}),m="wrapper";function b(e){var a=e.components,t=Object(c.a)(e,["components"]);return Object(r.a)(m,Object(n.a)({},p,t,{components:a,mdxType:"MDXLayout"}),Object(r.a)("h1",null,"Using this library from JavaScript and TypeScript"),Object(r.a)("p",null,"The schemas and data are published in the NPM package\n",Object(r.a)("a",Object(n.a)({parentName:"p"},{href:"https://www.npmjs.com/package/@mozilla/nimbus-shared"}),Object(r.a)("inlineCode",{parentName:"a"},"@mozilla/nimbus-shared")),". It contains helper\nmethods to validate data by the schemas, all of the schemas directly. For TypeScript, it also\nincludes the original type definitions and helpers for TypeScript usage, such as type assertions."),Object(r.a)("h2",null,"JavaScript"),Object(r.a)("pre",{className:"language-js"},Object(r.a)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"import")," ",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{")," schemas ",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}")," ",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"from")," ",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"@mozilla/nimbus-shared"'),Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\nschemas",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token property-access"}),"normandy"),Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token property-access"}),Object(r.a)("span",Object(n.a)({parentName:"span"},{className:"token maybe-class-name"}),"ConsoleLogArguments")),Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),'// {"$schema": "http://json-schema.org/draft-07/schema#", ...}'),"\n")),Object(r.a)("p",null,"JSON Schemas can be accessed in ",Object(r.a)("inlineCode",{parentName:"p"},"nimbus.schemas"),". Each schema group is an object under this export,\nand the schemas are identified by their type name."),Object(r.a)("p",null,"Helper functions to validate objects against those schemas can be found in in the ",Object(r.a)("inlineCode",{parentName:"p"},"typeGuards"),"\npackage export."),Object(r.a)("pre",{className:"language-js"},Object(r.a)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"import")," ",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{")," typeGuards ",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}")," ",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token keyword module"}),"from")," ",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"@mozilla/nimbus-shared"'),Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\ntypeGuards",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token method function property-access"}),"normandy_checkConsoleLogArguments"),Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"/*\n * {\n *   ok: false,\n *   errors: [{message: \"should have required property 'message'\", ...}]\n * }\n */"),"\n\ntypeGuards",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token method function property-access"}),"normandy_checkConsoleLogArguments"),Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{")," message",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"It works!"')," ",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"/*\n * {\n *   ok: true,\n *   errors: []\n * }\n */"),"\n")),Object(r.a)("h2",null,"TypeScript"),Object(r.a)("p",null,"As well as everything available from JS, the original types the schemas are generated from are\navailable in the ",Object(r.a)("inlineCode",{parentName:"p"},"types")," export of the library. Additionally, well-typed guards and assertions are\navailable in ",Object(r.a)("inlineCode",{parentName:"p"},"typeGuards"),"."),Object(r.a)("pre",{className:"language-typescript"},Object(r.a)("code",Object(n.a)({parentName:"pre"},{className:"language-typescript"}),Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"import")," ",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{")," types",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," typeGuards ",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}")," ",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"from")," ",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"@mozilla/nimbus-shared"'),Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n\n",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"let")," incomingJson",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," object ",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," ",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{")," message",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"json from the server"')," ",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// incoming JSON is a generic object with no type information"),"\n",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"if")," ",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"typeGuards",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token method function property-access"}),"normandy_isConsoleLogArguments"),Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"incomingJson",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")")," ",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// incomingJson has been narrowed to `types.normandy.ConsoleLogArguments"),"\n",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}")," ",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"else")," ",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// Something is wrong, and the types don't match what we expected."),"\n",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"const")," message",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," types",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token property-access"}),"messaging"),Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token property-access"}),Object(r.a)("span",Object(n.a)({parentName:"span"},{className:"token maybe-class-name"}),"SimpleCFRMessage"))," ",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," ",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{")," id",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"incomplete-message"')," ",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// Error: missing the following properties from type 'SimpleCFRMessage': template, trigger, content"),"\n\n",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"const")," userInput ",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),"=")," ",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{")," arbitrary",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"json"')," ",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\ntypeGuards",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"."),Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token method function property-access"}),"normandy_assertAddonRollbackArguments"),Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"("),"userInput",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),")"),Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// userInput has now been asserted to be of type `normandy.AddonRollbackArguments`."),"\n",Object(r.a)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// If it wasn't the previous line would have thrown an error."),"\n")))}b.isMDXComponent=!0},Ff2n:function(e,a,t){"use strict";function n(e,a){if(null==e)return{};var t,n,c=function(e,a){if(null==e)return{};var t,n,c={},s=Object.keys(e);for(n=0;n<s.length;n++)t=s[n],a.indexOf(t)>=0||(c[t]=e[t]);return c}(e,a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)t=s[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(c[t]=e[t])}return c}t.d(a,"a",(function(){return n}))},Qetd:function(e,a,t){"use strict";var n=Object.assign.bind(Object);e.exports=n,e.exports.default=e.exports},bLbG:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/usage/js-and-ts",function(){return t("8KKP")}])},wx14:function(e,a,t){"use strict";function n(){return(n=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}t.d(a,"a",(function(){return n}))}},[["bLbG",0,1]]]);